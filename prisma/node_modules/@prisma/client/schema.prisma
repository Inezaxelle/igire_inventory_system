generator client {
  provider = "prisma-client-js"
  output   = "./node_modules/@prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  role      Role
  createdAt DateTime @default(now())
}

model InventoryItem {
  id               String            @id @default(uuid())
  name             String
  category         Category
  status           Status            @default(AVAILABLE)
  condition        Condition         @default(GOOD)
  createdAt        DateTime          @default(now())
  borrowingRecords BorrowingRecord[]
  damageReports    DamageReport[]
}

model BorrowingRecord {
  id           String        @id @default(uuid())
  item         InventoryItem @relation(fields: [itemId], references: [id])
  itemId       String
  borrowerName String
  returnDate   DateTime
  returned     Boolean       @default(false)
  createdAt    DateTime      @default(now())
}

model DamageReport {
  id        String        @id @default(uuid())
  item      InventoryItem @relation(fields: [itemId], references: [id])
  itemId    String
  reason    String
  status    DamageStatus  @default(PENDING)
  createdAt DateTime      @default(now())
}

enum Role {
  ADMIN
  PROGRAM_MANAGER
}

enum Category {
  DEVICE
  FURNITURE
  CLEANING_MATERIAL
  FOOD_UTENSIL
}

enum Status {
  AVAILABLE
  BORROWED
  DAMAGED
  DISPOSED
}

enum Condition {
  NEW
  GOOD
  WORN_OUT
  BROKEN
}

enum DamageStatus {
  PENDING
  REPAIRED
  DISPOSED
}
